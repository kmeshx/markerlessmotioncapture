%{
ij = [[93, 49];
[80, 47];
[64, 50];
[62, 59];
[57, 57];
[62, 70];
[48, 67];
[61, 77];
[48, 73];
[41, 44];
[49, 50];
[41, 50];
[41, 59];
[30, 52];
[50, 69];
[38, 67];
[33, 39];
[3, 16]
];
%}

ij2 = [[151, 45];
[134, 55];
[112, 60];
[115, 73];
[106, 73];
[119, 84];
[95, 85];
[109, 93];
[83, 94];
[73, 57];
[74, 62];
[79, 62];
[62, 67];
[64, 74];
[75, 79];
[80, 86];
[54, 53];
[32, 73];
[6, 79]];


ij1 = [[151, 45];
[134, 55];
[112, 60];

[110, 70];


[119, 84];
[95, 85];
[109, 93];
[83, 94];
[73, 57];


[76, 60];


[62, 67];
[64, 74];
[75, 79];
[80, 86];
[54, 53];
[32, 73];
[6, 79]];


ij = [[148, 54];

[122, 65];

[110, 68];

[115, 76];

[103, 76];

[119, 84];

[95, 85];

[109, 93];

[84, 60];

[78, 64];

[72, 62];

[79, 62];

[62, 67];

[64, 74];

[75, 79];

[80, 86];

[54, 53];

[32, 73];

[6, 79]];

xshift = 100 - ij(1, 1);
yshift = 48 - ij(1, 2);

ij(:, 1) = ij(:, 1) + xshift;
ij(:, 2) = ij(:, 2) + yshift;

I = imread('sfff1.png');
%I = rgb2gray(imread('sfff2.png'));

%I = rgb2gray(I);

I = imbinarize(I); %imp
%I = bwmorph(I, 'thin', 3);
[row, col] = find(I == 1);

y = 120 - row; %MAGIC NUMBER
x = col;

ij(:, 2:2) = 120 - ij(:, 2:2); %MAGIC NUMBER
tr = [0, 0];
figure, hold on;

plot(ij(:, 1), ij(:, 2), 'g*');

init = initialize(ij);

%myskel = struct_from_graph_fin(init, [x, y], I, tr);
for q = 1:4
    init = struct_from_graph_fin(init, [x, y], I, tr);
    showskel_new(init);
end

